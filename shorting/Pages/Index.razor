@page "/"


@if (ShortenedUrl is not null)
{
    <MudAlert Severity="Severity.Success">@ShortenedUrl.ToString()</MudAlert>
}
<MudPaper Class="pa-16 my-4" Elevation="5">
    <MudStack Class="mt-8" Row="true" Spacing="16">
        <MudSwitch @bind-Checked="@customOptions"
                   ThumbIcon="@Icons.Material.Filled.Settings"
                   ThumbIconColor="Color.Info"/>
        <MudTextField
            @bind-Value="URL"
            Label="Enter a url"
            Clearable="true"
            HelperTextOnFocus="true"
            HelperText="Enter a url to shorten"
            Variant="Variant.Outlined"/>
        <MudPaper Class="mt-4" Elevation="0">
            <MudButton Disabled="@_processing" OnClick="ShortenUrl" Variant="Variant.Filled" Color="Color.Primary" EndIcon="@Icons.Material.Filled.Link">
                @if (_processing)
                {
                    <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true"/>
                    <MudText Class="ms-2">shorting</MudText>
                }
                else
                {
                    <MudText>shorten</MudText>
                }
            </MudButton>
        </MudPaper>
    </MudStack>
</MudPaper>
@if (customOptions)
{
    <MudPaper Class="pa-4 d-flex flex-row justify-space-evenly" Elevation="5">
        <MudTextField
            @bind-Value="customUrlName"
            Label="Enter shortened a url"
            Clearable="true"
            HelperTextOnFocus="true"
            HelperText="Enter a custom shortened URL instead of an auto generated one"
            Variant="Variant.Outlined"/>
        <MudDivider/>
        <MudSelect T="string" bind-Value="@CustomUrlOptions.ExpirationKey" Label="Expiration" Variant="Variant.Outlined" AnchorOrigin="Origin.BottomCenter">
            @foreach (var (key, value) in ExpirationOptions)
            {
                <MudSelectItem T="string" Value="key"/>
            }
        </MudSelect>
        <MudNumericField @bind-Value="@CustomUrlOptions.AccessAmount" Label="Access limit" Variant="Variant.Outlined" />
    </MudPaper>
}
